name: test

on:
  push:
    branches: [ main, master ]
    paths-ignore:
      - '**.md'
      - 'docs/**'
  pull_request:
    branches: [ main, master ]
    paths-ignore:
      - '**.md'
      - 'docs/**'

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
       - name: Checkout code
         uses: actions/checkout@v4

       - name: Install pnpm
         uses: pnpm/action-setup@v2
         with:
           version: 10.5.2
           run_install: false

       - name: Setup Node.js environment
         uses: actions/setup-node@v4
         with:
           node-version: '22'
           cache: 'pnpm'

       - name: Install dependencies
         run: pnpm install

       - name: Run build
         run: pnpm build

       - name: Run tests
         run: pnpm test